<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='在本篇文章中，我会对Neo4j Graph Data Science进行介绍，并且使用其中的算法做相似分析，这样可以让你更快的了解Neo4j Graph Data Science，并将其应用到实践中。
本文是全系列中的第2/3篇
Neo4j和知识图谱：Neo4j安装和使用
Neo4j和知识图谱：Neo4j内置算法库的安装和使用
Neo4j和知识图谱：使用Neo4j构建知识图谱
Neo4j Graph Data Science介绍 The Neo4j Graph Data Science (GDS) library provides efficiently implemented, parallel versions of common graph algorithms, exposed as Cypher procedures. Additionally, GDS includes machine learning pipelines to train predictive supervised models to solve graph problems, such as predicting missing relationships.
这是官网的介绍，接下来我也将称Neo4j Graph Data Science 为GDS。GDS提供了图算法，同时也可以用于机器学习。
根据处理问题类型，算法分为以下几类：
中心性
社区
相似度
路径寻找
节点嵌入
拓扑链路预测
这篇文章后面会介绍相似分析的案例。
GDS安装 下载GDS包，下载地址'>
<title>Neo4j和知识图谱：Neo4j内置算法库的安装和使用</title>

<link rel='canonical' href='https://ichigo-xin.github.io/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1neo4j%E5%86%85%E7%BD%AE%E7%AE%97%E6%B3%95%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/'>

<link rel="stylesheet" href="/scss/style.min.5be32ca3f6e1a997c75795c4359147cc6d4fbd34948c0acd51e31d237033978a.css"><meta property='og:title' content='Neo4j和知识图谱：Neo4j内置算法库的安装和使用'>
<meta property='og:description' content='在本篇文章中，我会对Neo4j Graph Data Science进行介绍，并且使用其中的算法做相似分析，这样可以让你更快的了解Neo4j Graph Data Science，并将其应用到实践中。
本文是全系列中的第2/3篇
Neo4j和知识图谱：Neo4j安装和使用
Neo4j和知识图谱：Neo4j内置算法库的安装和使用
Neo4j和知识图谱：使用Neo4j构建知识图谱
Neo4j Graph Data Science介绍 The Neo4j Graph Data Science (GDS) library provides efficiently implemented, parallel versions of common graph algorithms, exposed as Cypher procedures. Additionally, GDS includes machine learning pipelines to train predictive supervised models to solve graph problems, such as predicting missing relationships.
这是官网的介绍，接下来我也将称Neo4j Graph Data Science 为GDS。GDS提供了图算法，同时也可以用于机器学习。
根据处理问题类型，算法分为以下几类：
中心性
社区
相似度
路径寻找
节点嵌入
拓扑链路预测
这篇文章后面会介绍相似分析的案例。
GDS安装 下载GDS包，下载地址'>
<meta property='og:url' content='https://ichigo-xin.github.io/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1neo4j%E5%86%85%E7%BD%AE%E7%AE%97%E6%B3%95%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/'>
<meta property='og:site_name' content='ichigo-xin的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='neo4j' /><meta property='article:tag' content='KG' /><meta property='article:published_time' content='2023-07-03T20:52:02&#43;08:00'/><meta property='article:modified_time' content='2023-07-03T20:52:02&#43;08:00'/><meta property='og:image' content='https://ichigo-xin.github.io/imgs/DM_20230703230529_001.png' />
<meta name="twitter:title" content="Neo4j和知识图谱：Neo4j内置算法库的安装和使用">
<meta name="twitter:description" content="在本篇文章中，我会对Neo4j Graph Data Science进行介绍，并且使用其中的算法做相似分析，这样可以让你更快的了解Neo4j Graph Data Science，并将其应用到实践中。
本文是全系列中的第2/3篇
Neo4j和知识图谱：Neo4j安装和使用
Neo4j和知识图谱：Neo4j内置算法库的安装和使用
Neo4j和知识图谱：使用Neo4j构建知识图谱
Neo4j Graph Data Science介绍 The Neo4j Graph Data Science (GDS) library provides efficiently implemented, parallel versions of common graph algorithms, exposed as Cypher procedures. Additionally, GDS includes machine learning pipelines to train predictive supervised models to solve graph problems, such as predicting missing relationships.
这是官网的介绍，接下来我也将称Neo4j Graph Data Science 为GDS。GDS提供了图算法，同时也可以用于机器学习。
根据处理问题类型，算法分为以下几类：
中心性
社区
相似度
路径寻找
节点嵌入
拓扑链路预测
这篇文章后面会介绍相似分析的案例。
GDS安装 下载GDS包，下载地址"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://ichigo-xin.github.io/imgs/DM_20230703230529_001.png' />
    <link rel="shortcut icon" href="/ichigo.jpg" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/ichigo_huc5828797f4458237968d886b43fe8dd1_45236_300x0_resize_q75_box.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ichigo-xin的博客</a></h1>
            <h2 class="site-description">爱我所爱</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/ichigo-xin'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#neo4j-graph-data-science介绍">Neo4j Graph Data Science介绍</a></li>
    <li><a href="#gds安装">GDS安装</a></li>
    <li><a href="#相似分析">相似分析</a></li>
    <li><a href="#相似分析实战">相似分析实战</a>
      <ol>
        <li><a href="#数据准备">数据准备</a></li>
        <li><a href="#建立投影">建立投影</a></li>
        <li><a href="#计算相似度">计算相似度</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1neo4j%E5%86%85%E7%BD%AE%E7%AE%97%E6%B3%95%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/">
                
                    <img src="/imgs/DM_20230703230529_001.png" loading="lazy" alt="Featured image of post Neo4j和知识图谱：Neo4j内置算法库的安装和使用" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/code/" >
                code
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1neo4j%E5%86%85%E7%BD%AE%E7%AE%97%E6%B3%95%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/">Neo4j和知识图谱：Neo4j内置算法库的安装和使用</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jul 03, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 3 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>在本篇文章中，我会对Neo4j Graph Data Science进行介绍，并且使用其中的算法做相似分析，这样可以让你更快的了解Neo4j Graph Data Science，并将其应用到实践中。</p>
<p>本文是全系列中的第2/3篇</p>
<ul>
<li>
<p><a class="link" href="/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1neo4j%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/" >Neo4j和知识图谱：Neo4j安装和使用</a></p>
</li>
<li>
<p>Neo4j和知识图谱：Neo4j内置算法库的安装和使用</p>
</li>
<li>
<p><a class="link" href="/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E4%BD%BF%E7%94%A8neo4j%E6%9E%84%E5%BB%BA%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" >Neo4j和知识图谱：使用Neo4j构建知识图谱</a></p>
</li>
</ul>
<h2 id="neo4j-graph-data-science介绍">Neo4j Graph Data Science介绍</h2>
<p>The Neo4j Graph Data Science (GDS) library provides efficiently implemented, parallel versions of common graph algorithms, exposed as Cypher procedures. Additionally, GDS includes machine learning pipelines to train predictive supervised models to solve graph problems, such as predicting missing relationships.</p>
<p>这是<a class="link" href="https://neo4j.com/docs/graph-data-science/current/introduction/"  target="_blank" rel="noopener"
    >官网</a>的介绍，接下来我也将称Neo4j Graph Data Science 为GDS。GDS提供了图算法，同时也可以用于机器学习。</p>
<p>根据处理问题类型，算法分为以下几类：</p>
<ul>
<li>
<p>中心性</p>
</li>
<li>
<p>社区</p>
</li>
<li>
<p>相似度</p>
</li>
<li>
<p>路径寻找</p>
</li>
<li>
<p>节点嵌入</p>
</li>
<li>
<p>拓扑链路预测</p>
</li>
</ul>
<p>这篇文章后面会介绍相似分析的案例。</p>
<h2 id="gds安装">GDS安装</h2>
<p>下载GDS包，<a class="link" href="https://neo4j.com/deployment-center/#gds-tab"  target="_blank" rel="noopener"
    >下载地址</a></p>
<p><img src="/imgs/neo4j2_download.png"
	
	
	
	loading="lazy"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">将neo4j-graph-data-science-2.4.0.jar放入plugins目录下修改conf文件
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">vim conf/neo4j.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">dbms.security.procedures.unrestricted=my.extensions.example,my.procedures.*,gds.*
</span></span><span class="line"><span class="cl">dbms.security.procedures.allowlist=apoc.coll.*,apoc.load.*,gds.*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">重启neo4j，bin/neo4j restart
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">在web控制台中输入RETURN gds.version();就可以查询是否安装成功
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="相似分析">相似分析</h2>
<p>相似分析主要是通过分析两个节点的共有相邻的节点来进行相似分析的。</p>
<p>对于两个集合A和B，Jaccard相似度计算为：</p>
<p><img src="https://neo4j.com/docs/graph-data-science/current/_images/nodesim-formulas/jacard_nodesim.svg"
	
	
	
	loading="lazy"
	
		alt="jacard nodesim"
	
	
></p>
<p>重叠系数使用下面的公式:</p>
<p><img src="https://neo4j.com/docs/graph-data-science/current/_images/nodesim-formulas/overlap_nodesim.svg"
	
	
	
	loading="lazy"
	
		alt="overlap nodesim"
	
	
></p>
<p>对于数据库中的两个节点n和m，A就是和n所有相邻的节点的集合，同样的B是m相邻节点的集合</p>
<p>Neo4j中的相似算法提供了许多有用的功能，适用于各种场景。以下是一些常见的使用场景：</p>
<ol>
<li>
<p>推荐系统：通过计算节点之间的相似性，可以构建基于内容或基于协同过滤的推荐系统。相似算法（如相似度计算或最短路径）可以帮助发现相似的用户、产品或兴趣，并向用户提供个性化的推荐。</p>
</li>
<li>
<p>社交网络分析：相似算法可以帮助发现社交网络中的相似用户、群组或兴趣。例如，可以使用相似度算法（如Jaccard相似系数）来寻找在兴趣或活动上具有相似性的用户。</p>
</li>
<li>
<p>产品推荐：相似算法可以帮助发现产品之间的相似性，从而实现商品推荐和交叉销售。通过计算产品之间的相似度，可以根据用户的购买历史或兴趣，向其推荐类似的产品。</p>
</li>
<li>
<p>知识图谱分析：相似算法可以用于分析和比较知识图谱中的实体、关系或概念。通过计算实体之间的相似度，可以发现潜在的关联和模式，并进行语义推理。</p>
</li>
</ol>
<h2 id="相似分析实战">相似分析实战</h2>
<h3 id="数据准备">数据准备</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">CREATE
</span></span><span class="line"><span class="cl">  (alice:Person {name: &#39;Alice&#39;}),
</span></span><span class="line"><span class="cl">  (bob:Person {name: &#39;Bob&#39;}),
</span></span><span class="line"><span class="cl">  (carol:Person {name: &#39;Carol&#39;}),
</span></span><span class="line"><span class="cl">  (dave:Person {name: &#39;Dave&#39;}),
</span></span><span class="line"><span class="cl">  (eve:Person {name: &#39;Eve&#39;}),
</span></span><span class="line"><span class="cl">  (guitar:Instrument {name: &#39;Guitar&#39;}),
</span></span><span class="line"><span class="cl">  (synth:Instrument {name: &#39;Synthesizer&#39;}),
</span></span><span class="line"><span class="cl">  (bongos:Instrument {name: &#39;Bongos&#39;}),
</span></span><span class="line"><span class="cl">  (trumpet:Instrument {name: &#39;Trumpet&#39;}),
</span></span><span class="line"><span class="cl">  (rice:Food1 {name: &#39;Rice&#39;}),
</span></span><span class="line"><span class="cl">  (pizza:Food1 {name: &#39;Pizza&#39;}),
</span></span><span class="line"><span class="cl">  (noodle:Food1 {name: &#39;Noodle&#39;}),
</span></span><span class="line"><span class="cl">  (fish:Food1 {name: &#39;Fish&#39;}),
</span></span><span class="line"><span class="cl">  (pig:Food1 {name: &#39;Pig&#39;}),
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  (alice)-[:LIKES]-&gt;(guitar),
</span></span><span class="line"><span class="cl">  (alice)-[:LIKES]-&gt;(synth),
</span></span><span class="line"><span class="cl">  (alice)-[:LIKES]-&gt;(bongos),
</span></span><span class="line"><span class="cl">  (bob)-[:LIKES]-&gt;(guitar),
</span></span><span class="line"><span class="cl">  (bob)-[:LIKES]-&gt;(synth),
</span></span><span class="line"><span class="cl">  (carol)-[:LIKES]-&gt;(bongos),
</span></span><span class="line"><span class="cl">  (dave)-[:LIKES]-&gt;(guitar),
</span></span><span class="line"><span class="cl">  (dave)-[:LIKES {strength: 1.5}]-&gt;(trumpet),
</span></span><span class="line"><span class="cl">  (dave)-[:LIKES]-&gt;(bongos);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (alice:Person {name: &#39;Alice&#39;}), (rice:Food1 {name: &#39;Rice&#39;})
</span></span><span class="line"><span class="cl">CREATE (alice)-[:EAT]-&gt;(rice);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (alice:Person {name: &#39;Alice&#39;}), (pizza:Food1 {name: &#39;Pizza&#39;})
</span></span><span class="line"><span class="cl">CREATE (alice)-[:EAT]-&gt;(pizza);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (alice:Person {name: &#39;Alice&#39;}), (noodle:Food1 {name: &#39;Noodle&#39;})
</span></span><span class="line"><span class="cl">CREATE (alice)-[:EAT]-&gt;(noodle);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (bob:Person {name: &#39;Bob&#39;}), (fish:Food1 {name: &#39;Fish&#39;})
</span></span><span class="line"><span class="cl">CREATE (bob)-[:EAT]-&gt;(fish);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (bob:Person {name: &#39;Bob&#39;}), (pizza:Food1 {name: &#39;Pizza&#39;})
</span></span><span class="line"><span class="cl">CREATE (bob)-[:EAT]-&gt;(pizza);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (bob:Person {name: &#39;Bob&#39;}), (noodle:Food1 {name: &#39;Noodle&#39;})
</span></span><span class="line"><span class="cl">CREATE (bob)-[:EAT]-&gt;(noodle);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (carol:Person {name: &#39;Carol&#39;}), (fish:Food1 {name: &#39;Fish&#39;})
</span></span><span class="line"><span class="cl">CREATE (carol)-[:EAT]-&gt;(fish);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">MATCH (dave:Person {name: &#39;Dave&#39;}), (pizza:Food1 {name: &#39;Pizza&#39;})
</span></span><span class="line"><span class="cl">CREATE (dave)-[:EAT]-&gt;(pizza);
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样我们就建立了一个如下的关系图
<img src="/imgs/neo4j2_data.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="建立投影">建立投影</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">CALL gds.graph.project(
</span></span><span class="line"><span class="cl">    &#39;myGraph&#39;,
</span></span><span class="line"><span class="cl">    [&#39;Person&#39;, &#39;Instrument&#39;],
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">        LIKES: {
</span></span><span class="line"><span class="cl">            properties: {
</span></span><span class="line"><span class="cl">                strength: {
</span></span><span class="line"><span class="cl">                    property: &#39;strength&#39;,
</span></span><span class="line"><span class="cl">                    defaultValue: 1.0
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">CALL gds.graph.project(
</span></span><span class="line"><span class="cl">    &#39;myGraph1&#39;,
</span></span><span class="line"><span class="cl">    [&#39;Person&#39;, &#39;Instrument&#39;, &#39;Food1&#39;],
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">        EAT: {
</span></span><span class="line"><span class="cl">            type: &#39;EAT&#39;,
</span></span><span class="line"><span class="cl">            properties: {
</span></span><span class="line"><span class="cl">                strength: {
</span></span><span class="line"><span class="cl">                    property: &#39;strength&#39;,
</span></span><span class="line"><span class="cl">                    defaultValue: 0.5
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">        LIKES: {
</span></span><span class="line"><span class="cl">            type: &#39;LIKES&#39;,
</span></span><span class="line"><span class="cl">            properties: {
</span></span><span class="line"><span class="cl">                strength: {
</span></span><span class="line"><span class="cl">                    property: &#39;strength&#39;,
</span></span><span class="line"><span class="cl">                    defaultValue: 1.0
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">);
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样我们就建立了两个投影，graph中包含了Person和Instrument节点，graph1中包含了Person、Instrument和Food1节点</p>
<h3 id="计算相似度">计算相似度</h3>
<p>1.计算所有节点的相似度</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">CALL gds.nodeSimilarity.stream(&#39;myGraph&#39;)
</span></span><span class="line"><span class="cl">YIELD node1, node2, similarity
</span></span><span class="line"><span class="cl">RETURN gds.util.asNode(node1).name AS Person1, gds.util.asNode(node2).name AS Person2, similarity
</span></span><span class="line"><span class="cl">ORDER BY similarity DESCENDING, Person1, Person2
</span></span></code></pre></td></tr></table>
</div>
</div><p>语法解析：</p>
<ol>
<li>CALL gds.nodeSimilarity.stream(&lsquo;myGraph&rsquo;) 在myGraph投影中使用nodeSimilarity相似分析算法</li>
<li>YIELD node1, node2, similarity  使用节点node1、node2和相似度similarity</li>
<li>RETURN gds.util.asNode(node1).name AS Person1, gds.util.asNode(node2).name AS Person2, similarity 返回结果</li>
<li>ORDER BY similarity DESCENDING, Person1, Person2  排序方式</li>
</ol>
<p><img src="/imgs/neo4j2_similarity2.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>2.计算myGraph投影中与Alice的相似度</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">CALL gds.nodeSimilarity.stream(&#39;myGraph&#39;)
</span></span><span class="line"><span class="cl">YIELD node1, node2, similarity
</span></span><span class="line"><span class="cl">WITH gds.util.asNode(node1) AS person1, gds.util.asNode(node2) AS person2, similarity
</span></span><span class="line"><span class="cl">WHERE person1.name = &#39;Alice&#39;
</span></span><span class="line"><span class="cl">RETURN person1.name AS Person1, person2.name AS Person2, similarity
</span></span><span class="line"><span class="cl">ORDER BY similarity DESCENDING
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/imgs/neo4j2_similarity1.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>3.计算myGraph1投影中与Alice的相似度</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">CALL gds.nodeSimilarity.stream(&#39;myGraph1&#39;)
</span></span><span class="line"><span class="cl">YIELD node1, node2, similarity
</span></span><span class="line"><span class="cl">WITH gds.util.asNode(node1) AS person1, gds.util.asNode(node2) AS person2, similarity
</span></span><span class="line"><span class="cl">WHERE person1.name = &#39;Alice&#39;
</span></span><span class="line"><span class="cl">RETURN person1.name AS Person1, person2.name AS Person2, similarity
</span></span><span class="line"><span class="cl">ORDER BY similarity DESCENDING
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/imgs/neo4j2_similarity3.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>4.添加关系之后再计算与Alice的相似度
需要删除投影之后再重新建立（投影在建立的时候就已经固定了，更新了关系之后需要更新投影）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  MATCH (dave:Person {name: &#39;Dave&#39;}), (rice:Food1 {name: &#39;Rice&#39;}), (pizza:Food1 {name: &#39;Pizza&#39;}) ,(synthesizer:Instrument {name:&#34;Synthesizer&#34;})
</span></span><span class="line"><span class="cl">  CREATE 
</span></span><span class="line"><span class="cl">  (dave)-[:LIKES]-&gt;(synthesizer)
</span></span><span class="line"><span class="cl">  (dave)-[:EAT]-&gt;(rice),
</span></span><span class="line"><span class="cl">  (dave)-[:EAT]-&gt;(pizza);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">CALL gds.graph.drop(&#39;myGraph1&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行结果如下：
<img src="/imgs/neo4j2_similarity4.png"
	
	
	
	loading="lazy"
	
	
>
现在是alice最相似的是bob了</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/neo4j/">neo4j</a>
        
            <a href="/tags/kg/">KG</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E4%BD%BF%E7%94%A8neo4j%E6%9E%84%E5%BB%BA%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/">
        
        
            <div class="article-image">
                
                    <img src="/imgs/neo4j_kg1.png" loading="lazy" data-key="" data-hash="/imgs/neo4j_kg1.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Neo4j和知识图谱：使用Neo4j构建知识图谱</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/neo4j%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1neo4j%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/">
        
        

        <div class="article-details">
            <h2 class="article-title">Neo4j和知识图谱：Neo4j安装和使用</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E6%89%8B%E5%86%99spring%E6%95%B4%E5%90%88jpa%E6%B5%81%E7%A8%8B%E5%92%8Cspring-data-jpa%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">
        
        

        <div class="article-details">
            <h2 class="article-title">手写Spring整合Jpa流程和Spring Data JPA源码解析</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="ichigo-xin/blog"
    data-repo-id="R_kgDOJ1CHuA"
    data-category="Announcements"
    data-category-id="DIC_kwDOJ1CHuM4CXjhh"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark_dimmed');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 ichigo-xin的博客
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
